<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.or.davizn.etcService.Alram">
	
	<!-- 알람 개수 -->
	<select id="getCount" resultType="Integer">
		select count(*) from detailgoal where state=0
	</select> 
	 
	 <!-- 알림  서비스 가져오기 -->
	<select id="getAlram" parameterType="kr.or.davizn.dataDTO.PersonalDataGoalDTO" resultType="Map">
		SELECT P.DATASEQ, P.DATANAME, P.STRGSEQ, G.STARTDATE, G.FINALDATE, DG.DETAILGOALSEQ, DG.GOALNAME,
		DG.STATE FROM USERSTRG U JOIN PERSONALDATA P ON U.STRGSEQ = 
		P.STRGSEQ JOIN GOAL G ON P.DATASEQ=
		G.DATASEQ JOIN DETAILGOAL DG ON G.DATASEQ=DG.DATASEQ 
		WHERE U.USERID=#{userid} AND P.DATATYPE=#{datatype} AND DG.STATE =#{state};
	</select>

</mapper>